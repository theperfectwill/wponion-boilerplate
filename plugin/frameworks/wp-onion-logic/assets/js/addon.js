"use strict";!function(t){t.wponion.hooks.addAction("wponion_after_fields_reload","wponion_conditional_logic_builder",function(i){i.init_field(".wponion-element-conditional_logic_builder","conditional_logic_builder")}),t.wponion.hooks.addAction("wponion_before_init","wponion_conditional_logic_builder",function(){var n=t.wponion_create_field(function(){var i=this;if(0<this.element.find("div.query-builder").length){var n=this.handle_args(this.option("querybuilder"),"querybuilder");n.filters=this.handle_js_args(n.filters);var e=this.element.find("div.query-builder");e=e.queryBuilder(n),t.wponion._.isObject(this.option("saved_rules",{}))&&e.queryBuilder("setRules",this.option("saved_rules",{})),t.wponion_field(jQuery(e)).reload(),e.on("afterCreateRuleInput.queryBuilder",function(i,n){t.wponion_field(jQuery(n.$el)).reload()}),e.on("change",function(){i.save_inputs()}),this.save_inputs()}},{save_inputs:function(){var i=this.element.find("div.query-builder").queryBuilder("getRules");this.element.find(".query-builder-value").html(this.object_to_html_input(i,this.option("fieldid")))},modify_qb_template:function(i){return i=(i=i.replace(/btn/g,"wpo-btn")).replace(/wpo-btn-xs/g,"wpo-btn-sm")},handle_js_args:function(i){for(var n in i)i.hasOwnProperty(n)&&(i[n]=t.wponion.core.js_func(i[n]));return i},object_to_html_input:function(i,n){var e="";if(t.wponion._.isObject(i))for(var o in i)i.hasOwnProperty(o)&&(e+=this.object_to_html_input(i[o],n+"["+o+"]"));else t.wponion._.isObject(i)||(e+='<input type="hidden" name="'+n+'" value="'+i+'" />');return e}});t.wponion_register_field("conditional_logic_builder",function(i){return new n(i)})})}(window);